あなたはオーケストレーターとして、POから報告されたバグの修正を管理する。

## Step 1: バグ情報の収集

POのバグ報告から以下を特定する：
- 何が起きているか（現象）
- 何が期待される動作か
- 再現手順（分かれば）
- 影響範囲（推定）
- 緊急度（推定）

不足情報があればPOに質問する。

## Step 2: サイズ判定

バグの規模を判定する：

| サイズ | 判定基準 | PO承認ゲート |
|---|---|---|
| Large | 設計変更を伴うバグ | 修正計画 + レビュー結果 |
| Medium | 複数ファイルにまたがるバグ | レビュー結果 |
| Small | 単一ファイルの修正で済むバグ | レビュー結果のみ |
| Trivial | typo、表示崩れ等 | 承認なし |

## Step 3: バグ報告の作成

bugs/{bug-name}/report.md を作成する：

```markdown
# Bug Report: {bug-name}

## 現象
{何が起きているか}

## 期待動作
{本来どうあるべきか}

## 再現手順
1. {手順}
2. {手順}

## 影響範囲
{どの機能・ユーザーに影響があるか}

## 緊急度
{Critical / High / Medium / Low}

## 関連ファイル
{推定される原因箇所}
```

## Step 4: 修正計画の提示

```
🐛 バグ修正計画: {bug-name}
緊急度: {Critical / High / Medium / Low}
サイズ: {Large / Medium / Small / Trivial}

フェーズ:
  [1] researcher — 原因箇所の特定 → bugs/{bug-name}/analysis.md
  [2] implementer — 修正実装 + 回帰テスト追加
  [3] reviewer — 修正コードレビュー

承認ポイント: {サイズに応じたゲート}
進めてよいですか？
```

**POの承認を待つ。**
ただし緊急度 Critical の場合はその旨を伝え、迅速な承認を促す。

## Step 5: 実行

### 5-1: 原因分析
researcher に委任：
- 関連コードの調査
- エラーログの確認
- 根本原因の特定
→ bugs/{bug-name}/analysis.md を作成

### 5-2: 修正実装＋テスト
implementer に委任：
- analysis.md に基づいて修正
- 再現テストを先に書く（RED）
- 修正する（GREEN）
- 回帰テスト（既存テストが壊れていないことを確認）
- コミット

### 5-3: レビュー
reviewer に委任：
- 修正の妥当性確認
- 根本原因が正しく対処されているか

## Step 6: 完了

各フェーズ完了後：
- documenter に CHANGELOG 更新を委任
- bugs/{bug-name}/fix-verify.md に修正結果を記録

POに報告：
```
✅ バグ修正完了: {bug-name}

原因: {根本原因の要約}
修正: {何をどう直したか}
テスト: {追加したテスト}
影響: {他への影響有無}

変更ファイル:
  - {ファイル一覧}
```
